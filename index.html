<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    
    
</head>
<body>
    <script src="script.js">  //Theatre logic for calculating the cost of a ticket


        const GENERAL_ADMISSION_TICKET_COST = 20;
        const CHILD_AND_SENIOR_TICKET_COST = 10;
        const MANTINEE_DISCOUNT = 3;
        let GOING_TO_MATINEE = true;
        let age = 0;
        let cost = 0;
        let isMatinee = "";
        
        function checkMatinee(){
            isMatinee = prompt("Are you attending a mantinee show? (Y/N)");
            if (isMatinee.toLowerCase() !== "yes" && isMatinee.toLowerCase() !== "y" && isMatinee.toLowerCase()!== "no" && isMatinee.toLowerCase()!== "n") {
                alert("Please enter a value yes or no.");
                checkMatinee();
            } 
           } 
        
        function getAge(){
            age = prompt("What is the age of the person for this ticket?");
             let checkAge = parseInt(age);
             console.log("age: ", checkAge);
            if (isNaN(checkAge)){
                alert("Please enter a number.");
                getAge();
            } 
        }
        
        function getCost(isMatinee){
            if (isMatinee.toLowerCase() === "no" || isMatinee.toLowerCase() === "n") {
                //cost = GENERAL_ADMISSION_TICKET_COST;
                console.log("no mantinee : ", cost);
                GOING_TO_MATINEE = false;
                if(age >= 13 || age <= 64) {
                    cost = GENERAL_ADMISSION_TICKET_COST;
                    GOING_TO_MATINEE = false;
                    // set going to matinee to false
              }
              else if (isMatinee.toLowerCase() === "yes" || isMatinee.toLowerCase() === "y") {
                GOING_TO_MATINEE = true;
                console.log("yes mantinee your cost is: ", cost, GOING_TO_MATINEE);
                if ((age<= 12 || age >= 65)) {
                  cost = CHILD_AND_SENIOR_TICKET_COST - MANTINEE_DISCOUNT; 
                } 
                else {
                    cost = GENERAL_ADMISSION_TICKET_COST - MANTINEE_DISCOUNT;
                    // console.log("cost; ", cost, GOING_TO_MATINEE);
                    // return    cost;
                }
             }
            }
        }
        function getBaseTicketCost(age) {
            if (age === "") {
                 alert("Please enter a number, example: 25."); g
                getBaseTicketCost(age); 
            } 
             if ((age <= 12 || age >= 65) && (GOING_TO_MATINEE === true)) {
              console.log("senior discount age: ", age, cost);
              cost = CHILD_AND_SENIOR_TICKET_COST - MANTINEE_DISCOUNT;
              return alert("Discount alert #1, your base ticket cost is: $" + cost);
            } 
            else if ((age <= 12 || age >= 65) && (GOING_TO_MATINEE === false)) {
                console.log("senior discount age: ", age, cost);
                cost = CHILD_AND_SENIOR_TICKET_COST;
        
                return alert("Discount alert #2, your base ticket cost is: $" + cost);
            }
            else if (GOING_TO_MATINEE === false){
                console.log("senior discount age: ", age, cost);
                cost = GENERAL_ADMISSION_TICKET_COST ;
        
                return alert("Your base ticket cost is: $" + cost);
         }
         if (age >= 13 && age <= 64 && GOING_TO_MATINEE === true) {
            console.log("middle aged", age, cost);
            cost = GENERAL_ADMISSION_TICKET_COST - MANTINEE_DISCOUNT;
                alert("Hi middle aged customer, your base ticket cost is: $" + cost);
              }
              else{
                cost = GENERAL_ADMISSION_TICKET_COST;
                alert("Hi defualt user going to matinee, Your base ticket cost is: $" + cost);
              }
        }
        function buyTicket() {
            checkMatinee();
            getAge();    
            getCost(isMatinee);
            getBaseTicketCost(age);
            //age = 65; 
            //console.log("isMatinee: ", isMatinee.toString());
            //console.log("sending getbase ticket cost fution now", age);
            
            // call getBaseTicketCost to calculate the cost of the ticket
            //console.log("cost return value: ", cost);  
        //   console.log("ismatinee: ", isMatinee.toString());
         
            // cost = GENERAL_ADMISSION_TICKET_COST - MANTINEE_DISCOUNT;
            //update Going_to_matinee to true
          }
        //    else {
        //     alert("Please answer yes or no.");
        //     buyTicket();
        //     console.log("no mantinee click again or enter again: ", cost);
        //     //Let them try again this is an infite loop if they just keep clicking ok :) 
        //     }
        
        
        // let timeNow =  new Date().toLocaleString();
        // var today = new Date();   
        // document.getElementById("time").innerHTML = today.toLocaleString;
        // I'd like to parse the date but this would be more for a receipt so future work.
        
         </script>
    <nav class="navbar navbar-expand-lg navbar-light bg-warning">
        <a class="navbar-brand" href="#" id = "intro" style="font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Magical Mystery Theater     &nbsp</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="row align-items-md-stretch">
        </div>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
               <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Link</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Dropdown
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" href="#">Action</a>
                <a class="dropdown-item" href="#">Another action</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="#">Something else here</a>
              </div>
            </li>
          </ul>
          <form class="form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
          </form>
        </div>
      </nav>
      <div class="row align-items-md-stretch">
        <div class="col-md-6">
            <div class="h-100 p-5 text-white bg-primary border rounded-3" >
                <img src="https://i.ibb.co/PGnMqhn/firevegastheatre.jpg"" crossorigin class="img-fluid" alt="Fire magical man">
                <h1>Magical Mystery Theater</h1>
                <h4>Amazing shows 3 times a day!</h4>
                <p>Staring el diablo in the magical display of death defying acts</p>

                <button onclick="buyTicket()" type="button" id="buttonToBuy"required>Purchase Ticket</button>  
            </div>
        </div>
        <div class="col-md-6">
          
            <div

                class="h-100 p-5 bg-primary border rounded-3">
                <!-- <h3>Regular price: $20</h3>
                <h3>Senior (65+) & kids (under 12): $10</h3>
                <h3>Mantinee price: save $3 on any ticket </h3> -->
                <div class="table-responsive">
                    <table class="table table-bordered table-striped table-highlight">
                      <thead>
                        <th >Tickets all on sale</th>
                        <th>Date</th>
                        <th>Cost</th>
                      </thead>
                      <tbody>
                        <tr>
                          <td>Regular ticket </td>
                          <td id="time">10/12/2023</td>
                          <td>$20</td>
                        </tr>
                        <tr>
                          <td>Senior (65+) & kids (under 12) ticket</td>
                          <td id="time">11/15/2023</td>
                          <td>$10</td>
                        </tr>
                        <tr>
                            <td>Mantinee ticket: $3 dollar discount</td>
                            <td id="time">12/15/2023</td>
                            <td>$-3</td>
                            
                          </tr>
                        <tr>
                    </div>
                    <img src="https://i.ibb.co/JncCNYw/theatre.jpg" alt="theatre" border="0">
            </div>      
        </div>
        <button onclick="buyTicket()" type="button" id="buttonToBuy"required>Purchase Ticket</button>  

      </div>
</body>
</html>